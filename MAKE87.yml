version: 1
interfaces:
  - name: zenoh
    protocol: zenoh
    default_port:
      name: zenoh
      protocol: TCP
      target_port: 7447
    subscribers:
      - name: any_message
        spec:
          make87_message: make87_messages.*
        encoding: proto
        config:
          type: object
          properties:
            handler:
              type: object
              properties:
                handler_type:
                  type: string
                  enum: [FIFO, RING]
                  default: RING
                capacity:
                  type: integer
                  minimum: 0
                  description: "Capacity of the handler. For FIFO, this is the maximum number of messages it can hold. For RING, this is the size of the ring buffer."
                  default: 10
  - name: rerun-grpc
    protocol: grpc
    clients:
      - name: rerun-grpc-client
        spec:
          string: rerun-grpc
        config:
          type: object
          properties:
            batcher_config:
              type: object
              description: Configuration for chunk batching
              properties:
                flush_tick:
                  type: number
                  format: float
                  description: Time interval in seconds for flushing batches
                  default: 0.008
                flush_num_bytes:
                  type: integer
                  format: uint64
                  description: Number of bytes to trigger batch flush
                  minimum: 0
                  default: 1048576
                flush_num_rows:
                  type: integer
                  format: uint64
                  description: Number of rows to trigger batch flush
                  minimum: 0
                  default: 18446744073709551615
            flush_timeout:
              type: number
              format: float
              description: Timeout in seconds for flush operations
              minimum: 0
              nullable: true
              default: 3.0

build:
  build_kit:
    name: rust
dev_build:
  build_kit:
    name: rust
    build_additions:
      ide: vscode_server_rust
      ssh: ssh_server
